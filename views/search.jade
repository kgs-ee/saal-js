extends layout

block vars

block content

    .container-fluid
        .row.page-margin
            section.col-xs-12.col-md-12.col-lg-12

                .programme.row

                    if results.query_type == 'query'
                        .col-xs-12.col-md-12.col-lg-12
                            if results.fuse_js.length == 0
                                h2= t('q.query') + ': ' + q + ' • ' + t('q.results.0')
                            else if results.fuse_js.length == 1
                                h2= t('q.query') + ': ' + q + ' • ' + t('q.results.1')
                            else
                                h2= t('q.query') + ': ' + q + ' • ' + t('q.results') + ' ' + (results.fuse_js.length)

                        .col-xs-12.col-md-12.col-lg-12
                            //-b.pre= 'fuse_js: ' + results.fuse_js.length + ' ' + t('q.matches')
                            each event in op.get(results, 'fuse_js', [])
                                each stime in op.get(event, 'item.start-times', [])
                                    p= t('weekdays.' + new Date(stime).getDay()) + ', ' + (moment(stime).locale(lang).format('L'))
                                h3
                                    a(href='/' + lang + '/event/' + event.id)!= event.item.name
                                hr

                    if results.query_type == 'date'
                        .col-xs-12.col-md-12.col-lg-12
                            if results.length == 0
                                h2= t('q.query') + ': ' + q + ' • ' + t('q.results.0')
                            else if results.length == 1
                                h2= t('q.query') + ': ' + q + ' • ' + t('q.results.1')
                            else
                                h2= t('q.query') + ': ' + q + ' • ' + t('q.results') + ' ' + (results.length)

                        .col-xs-12.col-md-12.col-lg-12
                            each event in op.get(results, 'events', [])
                                p= t('weekdays.' + new Date(q_date).getDay()) + ', ' + (moment(q_date).locale(lang).format('L'))
                                h3
                                    a(href='/' + lang + '/event/' + event.id)!= event.name
                                hr
